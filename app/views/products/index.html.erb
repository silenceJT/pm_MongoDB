<p id="notice"><%= notice %></p>

<h1 class="py-2 text-3xl text-gary-900 font-bold">Products</h1>

<!--header class="bg-white shadow">
  <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
    <h1 class="text-3xl font-bold text-gray-900">
      Products
    </h1>
  </div>
</header-->
  <!--body class="bg-gray-100">
    <div class="flex bg-gray-100">

      <div class="w-3/12 bg-white rounded p-3 shadow-lg fixed bottom-0 md:h-screen ">
        <div class="content-center">
          <%#= render 'shared/header' %>
        </div>
      </div>

      <div class="main-content flex flex-col bg-gray-100">
        <div class="">
          <h1 class="text-3xl text-gary-900 font-bold">Products</h1>
        </div>

        <div class="overflow-x-auto">
          <div class="align-middle inline-block min-w-full overflow-hidden">
            <table class="min-w-full">
              <thead>
                 <tr>
                  <th>Brand</th>
                  <th>Category</th>
                  <th>Name</th>
                  <th>Retail Price</th>
                </tr>
              </thead>
              <tbody>
                <% @products.each do |product| %>
                <tr>
                  <td><%= product.brand %></td>
                  <td><%= product.category %></td>
                  <td><%= product.product_name %></td>
                  <td><%= product.retail_price %></td>
                </tr>
                <% end %>
              </tbody>
            </table>
          </div>
          
        </div>
        
        
      </div>
    </div>
  </body-->

<!--br>
<h1 class="text-3xl text-gary-900 font-bold">Products</h1>
<br-->

<!-- This example requires Tailwind CSS v2.0+ -->

<!--div class="flex flex-col">
  <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"-->
  <div class="container px-4 bg-white">
    <div class="py-4 flex items-center">
      <!--%= text_field_tag :search, params[:search], class: "focus:ring-indigo-500 focus:border-indigo-500 block w-1/4 shadow-sm sm:text-sm border-gray-300 rounded-md", placeholder: "Search for..." %-->
      <!--%= submit_tag "Search", class: "btn inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ml-3" %-->
      <input type="text" id="myInput" onkeyup="myFunction(2)" placeholder="Search product name" title="Type in a name" class="focus:ring-indigo-500 focus:border-indigo-500 block w-1/4 shadow-sm sm:text-sm border-gray-300 rounded-md">
    </div>
    <div class="align-middle inline-block min-w-full ">
      <div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
        <table id="myTable" class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                ID
              </th>

              <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Brand
                <!--input type="text" id="myInput" onkeyup="myFunction(0)" title="Type in a name" class="focus:ring-indigo-500 focus:border-indigo-500 block shadow-sm sm:text-sm border-gray-300 rounded-md"-->
              </th>

              <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Category
              </th>

              <th scope="col" class="px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Product Name
              </th>

              <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                SPS SKU
              </th>

              <!--th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Vender SKU
              </th-->

              <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Retail Price
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% @products.each do |product| %>
              <tr onclick="window.location.href='/products/<%= product.id.to_s %>'" style="cursor:pointer">
                <td class="px-4 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900"><%= product.no %></div>
                </td>

                <td class="px-4 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <!--div class="flex-shrink-0 h-10 w-10">
                      <img class="h-10 w-10 rounded-full" src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=4&w=256&h=256&q=60" alt="">
                    </div-->
                    <!--div class="ml-4"-->
                      <div class="text-sm font-medium text-gray-900">
                        <%= product.brand %>
                      </div>
                      <!--div class="text-sm text-gray-500">
                        jane.cooper@example.com
                      </div-->
                    <!--/div-->
                  </div>
                </td>
                <td class="px-4 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900"><%= product.category %></div>
                  <!--div class="text-sm text-gray-500">Optimization</div-->
                </td>
                <td class="px-2 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900"><%= product.product_name %></div>
                </td>
                <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500">
                  <%= product.sps_sku %>
                </td>
                <!--td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
                  <%= product.vender_sku %>
                </td-->
                <!--td class="px-6 py-3 text-sm text-gray-500 ">
                  <%= product.description %>
                </td-->
                <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500">
                  $<%= product.retail_price %>
                </td>
                <!--td class="px-2 py-4 whitespace-nowrap text-right text-sm font-medium">
                  <%#= link_to 'Edit', edit_product_path(product), class: "text-indigo-600 hover:text-indigo-900" %>
                </td-->
              </tr>
              <% end %>
            <!-- More items... -->
          </tbody>
        </table>


        <div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6">
          <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
            <div>
              <p class="text-sm text-gray-700">
                Showing
                <span class="font-medium">1</span>
                to
                <span class="font-medium">15</span>
                of
                <span class="font-medium"> <%= @products.total_count %> </span>
                results
              </p>
            </div>

            <div>
              <%= paginate @products %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--/div>
</div-->

<script>
function myFunction(n) {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[n]; //3rd Column
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }       
  }
}
</script>

<script>
function sortTable(n) {
  var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
  table = document.getElementById("myTable");
  switching = true;
  //Set the sorting direction to ascending:
  dir = "asc"; 
  /*Make a loop that will continue until
  no switching has been done:*/
  while (switching) {
    //start by saying: no switching is done:
    switching = false;
    rows = table.rows;
    /*Loop through all table rows (except the
    first, which contains table headers):*/
    for (i = 1; i < (rows.length - 1); i++) {
      //start by saying there should be no switching:
      shouldSwitch = false;
      /*Get the two elements you want to compare,
      one from current row and one from the next:*/
      x = rows[i].getElementsByTagName("TD")[n];
      y = rows[i + 1].getElementsByTagName("TD")[n];
      /*check if the two rows should switch place,
      based on the direction, asc or desc:*/
      if (dir == "asc") {
        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
          //if so, mark as a switch and break the loop:
          shouldSwitch= true;
          break;
        }
      } else if (dir == "desc") {
        if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
          //if so, mark as a switch and break the loop:
          shouldSwitch = true;
          break;
        }
      }
    }
    if (shouldSwitch) {
      /*If a switch has been marked, make the switch
      and mark that a switch has been done:*/
      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
      switching = true;
      //Each time a switch is done, increase this count by 1:
      switchcount ++;      
    } else {
      /*If no switching has been done AND the direction is "asc",
      set the direction to "desc" and run the while loop again.*/
      if (switchcount == 0 && dir == "asc") {
        dir = "desc";
        switching = true;
      }
    }
  }
}
</script>

<!--
<table>
  <thead>
    <tr>
      <th>Brand</th>
      <th>Category</th>
      <th>Product name</th>
      <th>Color</th>
      <th>Ean</th>
      <th>Vender sku</th>
      <th>Sps sku</th>
      <th>Description</th>
      <th>Fob usd</th>
      <th>Fob aud</th>
      <th>Margin rate</th>
      <th>Total profit</th>
      <th>Retail price</th>
      <th>Channel buy price</th>
      <th>Channel mkt rebate</th>
      <th>Saa</th>
      <th>Rcm</th>
      <th>Ce</th>
      <th>Active</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.brand %></td>
        <td><%= product.category %></td>
        <td><%= product.product_name %></td>
        <td><%= product.color %></td>
        <td><%= product.ean %></td>
        <td><%= product.vender_sku %></td>
        <td><%= product.sps_sku %></td>
        <td><%= product.description %></td>
        <td><%= product.fob_usd %></td>
        <td><%= product.fob_aud %></td>
        <td><%= product.margin_rate %></td>
        <td><%= product.total_profit %></td>
        <td><%= product.retail_price %></td>
        <td><%= product.channel_buy_price_egst %></td>
        <td><%= product.channel_mkt_rebate_egst %></td>
        <td><%= product.saa %></td>
        <td><%= product.rcm %></td>
        <td><%= product.ce %></td>
        <td><%= product.active %></td>
        <td><%= link_to 'Show', product %></td>
        <td><%= link_to 'Edit', edit_product_path(product) %></td>
        <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br-->

<!--%= link_to 'New Product', new_product_path %-->
