<div class="mt-3 mb-3 flex items-center justify-end">
  <%= link_to "Download search history: Excel", 
      searches_path({:format => "xls"}),
      download: 'Search_histories.xls', class: "inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"%>
</div>
<div class="align-middle inline-block min-w-full" id="segments_table">
  <div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
    <table id="myTable4" class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50 divide-y divide-gray-200">
        <tr class="h-12">
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Language</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Language Family</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ISO</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Area</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Country</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Region</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Inventory</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">C</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">V</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Result</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created By</th>
          <th class="hover:bg-gray-100 cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
        </tr>
      </thead>

      <tbody class="bg-white divide-y divide-gray-200">
        <% @searches.each do |search| %>
          <!-- <tr onclick="window.location.href='/searches/<%#= search.id.to_s %>'" style="cursor:pointer"> -->
          <tr>  
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.language_name %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.language_family %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.iso %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.area %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.country %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.region %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.inv %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.c_compare if search.c_size.present? %> <%= search.c_size %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.v_compare if search.v_size.present? %> <%= search.v_size %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.total_compare if search.total_size.present? %> <%= search.total_size %></td>
            <!-- <td><%#= search.papuas.size %>/<%#= Papua.all.size %> = <%#= ((search.papuas.size.to_f * 100 / Papua.all.size).round(2)).to_s + "%" %></td> -->
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.papuas.size %>/<%= Papua.all.size %> = <%= search.result %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= search.created_at.localtime %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900"><%= email_to_name(current_user.email) %></td>
            <td class="px-4 py-4 whitespace-normal text-sm text-gray-900">
              <%= link_to 'Delete', search, method: :delete, class: "inline-flex items-center px-2 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>